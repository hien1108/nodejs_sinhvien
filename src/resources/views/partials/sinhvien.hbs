<div class="student-management">
    <div class="student-header">
        <h2>Quản lý Sinh viên</h2>
        <div class="header-actions">
            <div class="search-box">
                <input type="text" id="searchStudent" placeholder="Tìm kiếm theo mã, tên sinh viên...">
                <i class='bx bx-search'></i>
            </div>
            <button class="btn-add" onclick="openStudentModal()">
                <i class='bx bx-plus'></i> Thêm Sinh viên
            </button>
        </div>
    </div>

    <table class="data-table" id="studentTable">
        <thead>
            <tr>
                <th>Mã SV</th>
                <th>Tên SV</th>
                <th>Ngày sinh</th>
                <th>Giới tính</th>
                <th>Khoa</th>
                <th>Lớp</th>
                <th>Email</th>
                <th>SĐT</th>
                <th>Địa chỉ</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody id="studentTableBody">
            {{#each students}}
                <tr>
                    <td>{{this.studentId}}</td>
                    <td>{{this.name}}</td>
                    <td>{{this.dob}}</td>
                    <td>{{this.gender}}</td>
                    <td>{{this.maKhoa.tenKhoa}}</td>
                    <td>{{this.class.tenLop}}</td>
                    <td>{{this.email}}</td>
                    <td>{{this.phone}}</td>
                    <td>{{this.address}}</td>
                    <td>
                        <button class="btn-edit"
                            onclick="openStudentModal(
                                '{{this._id}}',
                                '{{this.studentId}}',
                                '{{this.name}}',
                                '{{this.dob}}',
                                '{{this.gender}}',
                                '{{this.maKhoa._id}}',
                                '{{this.class._id}}',
                                '{{this.email}}',
                                '{{this.phone}}',
                                '{{this.address}}'
                            )">
                            <i class='bx bx-edit'></i> Sửa
                        </button>
                        <button class="btn-delete" onclick="deleteStudent('{{this._id}}')">
                            <i class='bx bx-trash'></i> Xóa
                        </button>
                    </td>
                </tr>
            {{/each}}
        </tbody>    </table>
</div>

<!-- Toast notification -->
<div id="toast" class="toast">
    <span id="toastMessage"></span>
</div>

<!-- Loading spinner -->
<div id="loadingSpinner" class="loading-spinner">
    <div class="spinner"></div>
</div>

<!-- Modal thêm/sửa sinh viên -->
<div id="studentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="studentModalTitle">Thêm Sinh viên</h3>
            <span class="close" onclick="closeStudentModal()"><i class='bx bx-x'></i></span>
        </div>
        <form id="studentForm">
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentId">Mã Sinh viên</label>
                        <input type="text" id="studentId" required>
                    </div>
                    <div class="form-group">
                        <label for="studentName">Tên Sinh viên</label>
                        <input type="text" id="studentName" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentDob">Ngày sinh</label>
                        <input type="date" id="studentDob">
                    </div>
                    <div class="form-group">
                        <label for="studentGender">Giới tính</label>
                        <select id="studentGender">
                            <option value="">Chọn giới tính</option>
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentFaculty">Khoa</label>
                        <select id="studentFaculty">
                            <option value="">Chọn khoa</option>
                            {{#each faculties}}
                            <option value="{{this._id}}">{{this.tenKhoa}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="studentClass">Lớp</label>
                        <select id="studentClass">
                            <option value="">Chọn lớp</option>
                            {{#each classes}}
                            <option value="{{this._id}}">{{this.tenLop}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentEmail">Email</label>
                        <input type="email" id="studentEmail">
                    </div>
                    <div class="form-group">
                        <label for="studentPhone">Số điện thoại</label>
                        <input type="tel" id="studentPhone">
                    </div>
                </div>
                <div class="form-group">
                    <label for="studentAddress">Địa chỉ</label>
                    <textarea id="studentAddress" rows="3"></textarea>
                </div>
                <input type="hidden" id="editingStudentId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="closeStudentModal()">Hủy</button>
                <button type="submit" class="btn-save">Lưu</button>
            </div>
        </form>
    </div>
</div>

{{!-- Xóa script cũ để tránh load 2 lần --}}
{{!-- <script src="/js/student.js"></script> --}}
